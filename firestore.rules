rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ëª¨ë“  ì‚¬ëžŒì´ ì½ì„ ìˆ˜ ìžˆë„ë¡ í—ˆìš©
    match /visitors/{date} {
      allow read: if true; // ðŸ”¥ ëˆ„êµ¬ë‚˜ ë°©ë¬¸ìž ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìžˆìŒ

      // ðŸ”¥ ë°©ë¬¸ìž ìˆ˜ ì—…ë°ì´íŠ¸ë§Œ ê°€ëŠ¥ (ë®ì–´ì“°ê¸°, ì‚­ì œ ì°¨ë‹¨)
      allow update: if request.resource.data.keys().hasOnly(['count'])
                    && request.resource.data.count is int
                    && request.resource.data.count > resource.data.count;

      // ðŸ”¥ ìƒˆ ë°©ë¬¸ ê¸°ë¡ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì€ í—ˆìš©
      allow create: if request.resource.data.keys().hasOnly(['count'])
                    && request.resource.data.count is int
                    && request.resource.data.count > 0;

      // ðŸ”¥ ì‚­ì œ ë°©ì§€
      allow delete: if false;
    }
  }
}
